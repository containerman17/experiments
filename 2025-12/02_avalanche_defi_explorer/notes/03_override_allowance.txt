CIRCULAR ROUTE QUOTING PROBLEM & SOLUTION
==========================================

PROBLEM:
--------
When quoting circular routes (e.g., USDC→WAVAX→USDt→USDC) with state overrides,
we get garbage results (4 billion USDC for 1 USDC input).

Root cause: We override tokenIn balance directly on Hayabusa contract.
The override persists for the entire eth_call, so when measuring:
  balBefore = tokenOut.balanceOf(Hayabusa)
  
If tokenOut == tokenIn (circular), balBefore returns the OVERRIDE value,
not the actual 0 balance, corrupting the delta calculation.


SOLUTION: Override on external address + allowance
--------------------------------------------------
Instead of overriding balance on Hayabusa, override on a "whale" address:

1. Override whale's balance:     token.balanceOf(whale) = amount
2. Override whale's allowance:   token.allowance(whale, Hayabusa) = amount
3. Hayabusa pulls via:           token.transferFrom(whale, self, amount)

This way Hayabusa.balanceOf(tokenIn) starts at 0, so circular routes
measure the output correctly.


IMPLEMENTATION:
---------------
1. Modify getOverride.ts to:
   - Take a "fundingAddress" parameter (whale address)  
   - Return overrides for BOTH balance slot AND allowance slot
   
2. Modify Hayabusa.sol:
   - Add a new quote function: quoteFromExternal(address funder, ...)
   - First line: transferFrom(funder, address(this), amountIn)
   - Rest same as current quote()

3. Modify Hayabusa.ts wrapper:
   - Use the new quoteFromExternal function
   - Pass the whale address (e.g., 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045)


ALLOWANCE SLOT CALCULATION:
---------------------------
For standard ERC20 with allowance mapping at slot N:
  allowance[owner][spender] is at:
    keccak256(spender, keccak256(owner, slot))

Example for USDC with allowance at slot 10:
  innerHash = keccak256(abi.encode(owner, 10))
  finalSlot = keccak256(abi.encode(spender, innerHash))


TOKENS NEEDING SPECIAL HANDLING:
--------------------------------
Some tokens use non-standard storage (ERC-7201, proxy patterns).
Need to verify allowance slot for each token in supported_tokens.json.

Quick test: Override and call allowance() to verify it returns expected value.
